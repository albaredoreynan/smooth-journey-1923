<%= form_for(@categorysale) do |f| %>
  <% if @categorysale.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@categorysale.errors.count, "error") %> prohibited this categorysale from being saved:</h2>
      <ul>
      <% @categorysale.errors.full_messages.each do |msg| %>
        <!--<li><%= msg %></li>-->
      <% end %>
      </ul>
    </div>
  <% end %>

 <br />
<table width="190" border="0">
<!--<tr>
    <td><%= label_tag :ServerName %></td>
    <td><%= collection_select('categorysale','employee_id',Employee.all.collect,'id','employee_firstName') %></td>
</table>
  <br />-->
 
<table width="700" border="0">
  <tr>
    <td>Branch:</td>
    <td><%= text_field_tag :branch,'',:disabled => true %></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><%= f.label "Date" %></td>
    <td><%= f.date_select :cs_date %></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

   <% f.fields_for :csrows do |builder| %>
  	 <tr>
  	 	<% id = @category_ids.pop %>
  	 	<% if id!=nil %>		
	  	 	<%= builder.hidden_field :category_id, :value => id %>
	  		<td><%= @category_names.pop %></td>
	  		<td><%= builder.text_field :cs_amount,:class => 'txt', :onFocus => "startCalc();", :onBlur =>"stopCalc();" %></td>
	  	<% end %>
	 </tr>
  <% end %>

  <tr>
    <td><%= f.label "TOTAL" %></td>
    <td><%= f.text_field :cs_total_amount %></td>
    <td><%= f.label "Total Revenue" %></td>
    <td><%= f.text_field :cs_revenue %></td>
  </tr>
  <tr>
    <td><%= f.label "VAT" %></td>
    <td><%= f.text_field :vat %></td>
    <td><%= f.label "VOID" %></td>
    <td><%= f.text_field :void %></td>
  </tr>
  <tr>
    <td><%= f.label "Service Charge" %></td>
    <td><%= f.text_field :servicecharge %></td>
    <td>Server Name:</td>
	<td><%= f.collection_select :employee_id, Employee.find(:all), :id, :employee_firstName, :prompt => "Select server" %></td>
 </tr>
 <tr>
    <td><%= f.label :customer_count %></td>
    <td><%= f.text_field :customer_count %></td>
    <td><%= f.label :transaction_count %></td>
    <td><%= f.text_field :transaction_count %></td>
    <td>Input<input id="shares" type="text" /><td>
	<td>Output<span id="result"></span><td>
 </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><%= f.submit "Save as Draft" %></td>
    <td><%= f.submit "Save" %></td>
  </tr>
</table>

<script>
$(document).ready(function(){
    $('#shares').keyup(function(){
        $('#result').text($('#shares').val() * .12);
    });   
});
</script>

<% end %>
